<!DOCTYPE html>
<html class="no-js" lang="en-US">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
	
	<title>Adding Basic Auth to site on Laravel Forge - build</title>
	<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
	<link rel="canonical" href="https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/">
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Adding Basic Auth to site on Laravel Forge - build">
	<meta property="og:description" content="Here I am going to outline how I added basic auth to my build environment for this site. I switched servers to run on Laravel Forge, and the only instructions I could find for how to do this were several years (and versions of Forge) old. I know the server is running nginx, and I [&hellip;]">
	<meta property="og:url" content="https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/">
	<meta property="og:site_name" content="build">
	<meta property="article:published_time" content="2019-09-25T13:45:36+00:00">
	<meta property="og:image" content="">
	<meta name="twitter:card" content="summary_large_image">
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://patrickgodbey.com/#website","url":"https://patrickgodbey.com/","name":"build","description":"Just another WordPress site","potentialAction":[{"@type":"SearchAction","target":"https://patrickgodbey.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/#primaryimage","inLanguage":"en-US","url":"file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/scrnli_9_25_2019_11-18-16-AM-470x240.png"},{"@type":"WebPage","@id":"https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/#webpage","url":"https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/","name":"Adding Basic Auth to site on Laravel Forge - build","isPartOf":{"@id":"https://patrickgodbey.com/#website"},"primaryImageOfPage":{"@id":"https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/#primaryimage"},"datePublished":"2019-09-25T13:45:36+00:00","dateModified":"2019-09-25T13:45:36+00:00","author":{"@id":"https://patrickgodbey.com/#/schema/person/fee309bea42cb370692541b4722b5517"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://patrickgodbey.com/2019/09/25/adding-basic-auth-to-site-on-laravel-forge/"]}]},{"@type":"Person","@id":"https://patrickgodbey.com/#/schema/person/fee309bea42cb370692541b4722b5517","name":"patrickg","image":{"@type":"ImageObject","@id":"https://patrickgodbey.com/#personlogo","inLanguage":"en-US","url":"http://0.gravatar.com/avatar/93cbc1c33b5c9db4af6aea8de282d153?s=96&d=mm&r=g","caption":"patrickg"},"sameAs":["https://patrickgodbey.com"]}]}</script>
	


<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
<link rel="dns-prefetch" href="//code.jquery.com">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com">

<link rel="stylesheet" id="wp-block-library-css" href="https://patrickgodbey.com/wp-includes/css/dist/block-library/style.min.css?ver=5.5.1" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-theme-css" href="https://patrickgodbey.com/wp-includes/css/dist/block-library/theme.min.css?ver=5.5.1" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap4-css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css?ver=4.5.1" type="text/css" media="all">
<link rel="stylesheet" id="fontawesome5-css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css?ver=5.14.0" type="text/css" media="all">
<link rel="stylesheet" id="gutenberg-blocks-css" href="https://patrickgodbey.com/wp-content/themes/patrickgodbey/theme/css/blocks.css?ver=5.5.1" type="text/css" media="all">
<link rel="stylesheet" id="theme-css" href="https://patrickgodbey.com/wp-content/themes/patrickgodbey/theme/css/b4st.css" type="text/css" media="all">
<link rel="alternate" type="application/json" href="https://patrickgodbey.com/wp-json/wp/v2/posts/15"><link rel="alternate" type="application/json+oembed" href="https://patrickgodbey.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fpatrickgodbey.com%2F2019%2F09%2F25%2Fadding-basic-auth-to-site-on-laravel-forge%2F">
<link rel="alternate" type="text/xml+oembed" href="https://patrickgodbey.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fpatrickgodbey.com%2F2019%2F09%2F25%2Fadding-basic-auth-to-site-on-laravel-forge%2F&amp;format=xml">
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style></head>

<body class="post-template-default single single-post postid-15 single-format-standard">

<nav id="site-navbar" class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">

        <a class="navbar-brand" href="https://patrickgodbey.com/">build</a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarDropdown" aria-controls="navbarDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarDropdown">
      
          <form class="form-inline ml-auto pt-2 pt-md-0" role="search" method="get" id="searchform" action="https://patrickgodbey.com/">
      <div class="input-group">
        <input class="form-control border-secondary" type="text" value="" placeholder="Search..." name="s" id="s">
        <div class="input-group-append">
          <button type="submit" id="searchsubmit" value="" class="btn btn-outline-secondary">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </form>
        
    </div>

  </div>
</nav>

  <div class="border-bottom bg-light"><div class="container"><nav aria-label="breadcrumb"><ol class="breadcrumb bg-light mb-0 px-0" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="https://patrickgodbey.com/" itemprop="item"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"></li><span class="px-2 text-muted"> / </span><li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a href="https://patrickgodbey.com/category/tutorial/" itemprop="item"><span itemprop="name">tutorial</span></a><meta itemprop="position" content="2"></li><span class="px-2 text-muted"> / </span><li class="breadcrumb-item active" aria-current="page">Adding Basic Auth to site on Laravel Forge</li></ol></nav></div></div>
<main id="site-main" class="mt-5">

  
  <article role="article" id="post_15" class="post-15 post type-post status-publish format-standard hentry category-tutorial tag-htpasswd">
    <header class="container entry-header mb-5">
      <h1 class="text-center">Adding Basic Auth to site on Laravel Forge</h1>
      <div class="header-meta my-5 border-top border-bottom py-3 text-center text-muted">
        By <a href="https://patrickgodbey.com/author/patrickg/" title="Posts by patrickg" rel="author">patrickg</a> on <time class="entry-date published" datetime="2019-09-25T13:45:36+00:00">September 25, 2019</time><br>
        In <a href="https://patrickgodbey.com/category/tutorial/" rel="category tag">tutorial</a> / Tags: <a href="https://patrickgodbey.com/tag/htpasswd/" rel="tag">htpasswd</a> / <a href="#post-comments">0 comments</a>
      </div>
    </header>
    <section class="entry-content">
      <p>Here I am going to outline how I added basic auth to my build environment for this site. I switched servers to run on Laravel Forge, and the only instructions I could find for how to do this were several years (and versions of Forge) old. I know the server is running nginx, and I know how to do this manually, but I don&rsquo;t want to go around any infrastructure Forge has setup and ham-fist it.</p>
<h2>Generate htpasswd</h2>
<p>First thing you need to do is generate your htpasswd file. Search for an htpasswd generator and enter in a username and password. The result will be a single line string separated by a colon. Copy that entire string and keep it handy.</p>
<h2>Create htpasswd file</h2>
<p>Next, SSH into your server, and create the file <code>.htpasswd</code><br> I created mine in <code>/etc/nginx/</code></p>
<p><code>cd /etc/nginx<br>
sudo nano .htpasswd</code></p>
<p>(if doing multiple sites, you can name this whatever you want, just remember to reference it when adding it to the config below)</p>
<p>paste in your generated authorization line here</p>
<p>ctrl+x and then y to save the file.</p>
<h2>Edit nginx config</h2>
<p>Next go to your Forge dashboard, and go to your specific site. At the bottom of the screen there is a grey button/pill/badge labled files.<br> Click that, and then edit nginx configuration.</p>
<figure class="aligncenter size-medium wp-image-115"><img loading="lazy" src="file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/scrnli_9_25_2019_11-18-16-AM-470x240.png" sizes="(max-width: 768px) 100vw, 768px" srcset="file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-470x240-xs.png 300w,file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-470x240-sm.png 480w,file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-470x240-md.png 768w" alt="" width="470" height="240"></figure>
<p>After that, you need to add two lines to your configuration file. Be careful not to disturb anything you are unsure of. Find the top of your <code>server{}</code> block and you need to add two lines. The first, the directive to restrict content and display the message of the alert box. The second line, is the path to your .htpasswd file.</p>
<figure class="aligncenter size-medium wp-image-116"><img loading="lazy" src="file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/scrnli_9_25_2019_11-18-16-AM-1-470x240.png" sizes="(max-width: 768px) 100vw, 768px" srcset="file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-1-470x240-xs.png 300w,file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-1-470x240-sm.png 480w,file:///C:/Users/patri/Documents/Publii/sites/patrickgodbeycom/preview/media/posts/13/responsive/scrnli_9_25_2019_11-18-16-AM-1-470x240-md.png 768w" alt="" width="470" height="240"></figure>
<p><code>    auth_basic "Restricted Content";<br>
auth_basic_user_file /etc/nginx/.htpasswd;</code></p>
<p>If you want to do this with multiple sites, you should name your files something more recognizable, such as sitename.htpasswd and then reference those specifically in your settings.</p>
    </section>

    
    <footer class="container mt-5 border-top pt-3">
      <div class="author-bio media mt-5">
        <img alt="Avatar for patrickg" title="Gravatar for patrickg" src="https://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=g" srcset="https://0.gravatar.com/avatar/?s=192&amp;d=mm&amp;r=g 2x" class="avatar avatar-96 photo avatar-default" height="96" width="96" loading="lazy">        <div class="media-body ml-3">
          <p class="h4 author-name">Author: <a href="https://patrickgodbey.com/author/patrickg/" title="Posts by patrickg" rel="author">patrickg</a></p>
                    <p class="author-other-posts mb-0">Other posts by <a href="https://patrickgodbey.com/author/patrickg/" title="Posts by patrickg" rel="author">patrickg</a></p>
        </div>
      </div>

      <div class="row mt-5 border-top pt-3 pb-5">
        <div class="col">
          <a href="https://patrickgodbey.com/2019/06/23/3d-printing-a-replacement-ball-joint-for-phone-holder-vent-mount/" rel="prev"><i class="fas fa-fw fa-angle-left"></i>Previous post: 3D Printing a replacement ball joint for phone holder vent mount</a>        </div>
        <div class="col text-right">
          <a href="https://patrickgodbey.com/2020/01/15/project-hotdog-supernova/" rel="next">Next post: Project: Hotdog Supernova<i class="fas fa-fw fa-angle-right"></i></a>        </div>
      </div>

    </footer>
  </article>

    
    <section id="site-main-widgets" class="bg-light">
    <div class="container">
      <div class="row pt-5 pb-4" id="main-widget-area" role="navigation">
        <div class="search-2 widget_search col-sm"><form class="form-inline mb-3" role="search" method="get" id="searchform" action="https://patrickgodbey.com/">
      <input class="form-control mr-sm-1" type="text" value="" placeholder="Search..." name="s" id="s">
      <button type="submit" id="searchsubmit" value="Search" class="btn btn-primary"><i class="fas fa-search"></i></button>
    </form></div>
		<div class="recent-posts-2 widget_recent_entries col-sm">
		<h2 class="h4">Recent Posts</h2>
		<ul>
											<li>
					<a href="https://patrickgodbey.com/2020/06/18/thoughts-about-leaving-townnews-com/">Thoughts about leaving TownNews.com</a>
									</li>
											<li>
					<a href="https://patrickgodbey.com/2020/06/08/things-in-my-mental-rotation-a-list/">Things in my mental rotation: A list.</a>
									</li>
											<li>
					<a href="https://patrickgodbey.com/2020/05/31/my-experience-with-publii/">My experience with Publii</a>
									</li>
											<li>
					<a href="https://patrickgodbey.com/2020/03/10/wordpress-graphql-and-gatsby/">WordPress, GraphQL, and Gatsby.</a>
									</li>
											<li>
					<a href="https://patrickgodbey.com/2020/01/28/5-steps-to-ace-a-programming-interview/">5 steps to ace a programming interview.</a>
									</li>
					</ul>

		</div><div class="recent-comments-2 widget_recent_comments col-sm"><h2 class="h4">Recent Comments</h2><ul id="recentcomments"></ul></div>      </div>
    </div>
  </section>
  
  
  
</main>


<footer id="site-footer">

  <div class="container">

        <div class="row pt-5 pb-4" id="footer" role="navigation">
      <div class="archives-2 widget_archive col-sm"><h2 class="h4">Archives</h2>
			<ul>
					<li><a href="https://patrickgodbey.com/2020/06/">June 2020</a></li>
	<li><a href="https://patrickgodbey.com/2020/05/">May 2020</a></li>
	<li><a href="https://patrickgodbey.com/2020/03/">March 2020</a></li>
	<li><a href="https://patrickgodbey.com/2020/01/">January 2020</a></li>
	<li><a href="https://patrickgodbey.com/2019/09/">September 2019</a></li>
	<li><a href="https://patrickgodbey.com/2019/06/">June 2019</a></li>
	<li><a href="https://patrickgodbey.com/2019/03/">March 2019</a></li>
			</ul>

			</div><div class="categories-2 widget_categories col-sm"><h2 class="h4">Categories</h2>
			<ul>
					<li class="cat-item cat-item-2"><a href="https://patrickgodbey.com/category/blog/">blog</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://patrickgodbey.com/category/rant/">rant</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://patrickgodbey.com/category/tutorial/">tutorial</a>
</li>
			</ul>

			</div><div class="meta-2 widget_meta col-sm"><h2 class="h4">Meta</h2>
		<ul>
						<li><a rel="nofollow" href="https://patrickgodbey.com/wp-login.php">Log in</a></li>
			<li><a href="https://patrickgodbey.com/feed/">Entries feed</a></li>
			<li><a href="https://patrickgodbey.com/comments/feed/">Comments feed</a></li>

			<li><a href="https://wordpress.org/">WordPress.org</a></li>
		</ul>

		</div>    </div>
    
  </div>

</footer>


    <div class="container">
      <div class="row pt-3">
        <div class="col-sm">
          <p class="text-center text-sm-left">&copy; 2020 <a href="https://patrickgodbey.com/">build</a></p>
        </div>
        <div class="col-sm">
          <p class="text-center text-sm-right"><a href="https://github.com/SimonPadbury/b4st">b4st</a> theme for WordPress</p>
        </div>
      </div>
    </div>
		


<div id="vp" style="position: fixed; bottom: 0.5rem; right: 0.5rem; z-index: 999; display: inline-block; background: #555; color: #ffffff; padding: 0 0.5rem 0.125rem; border-radius: 0.25rem;"></div>

<script>
  var vp = document.body.querySelector('#vp');
  var viewportWidth = window.innerWidth + 'px';
  vp.innerHTML = viewportWidth;
  window.addEventListener('resize', function () {
    viewportWidth = window.innerWidth + 'px';
    vp.innerHTML = viewportWidth;
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js?ver=2.8.3" id="modernizr-js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js?ver=3.5.1" id="jquery-3.5.1-js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js?ver=1.16.1" id="popper-js"></script>
<script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js?ver=4.5.1" id="bootstrap4-js"></script>
<script type="text/javascript" src="https://patrickgodbey.com/wp-content/themes/patrickgodbey/theme/js/b4st.js" id="theme-js"></script>
</body>
</html>
